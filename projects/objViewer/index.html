<!DOCTYPE html>
<html lang="en"><head>
        <meta charset="utf-8">
	    <title>About Nic</title>
        <link rel="stylesheet" type="text/css" href="../../styles.css">
        <style>
            div.desmosRenderings {
                max-width: fit-content;
                text-align: center;
                margin-left: auto;
                margin-right: auto;
                display: flex;
                gap: 1rem;
                div {
                    flex: 1;
                }
            }

            div.codeBlock {
                max-width: fit-content;
                margin-left: auto;
                margin-right: auto;
            }

            pre {
                background-color: rgb(27, 23, 32);
                width: fit-content;
                border: 1px solid #ccc;
            }

            div#pause {
                padding: 2rem;
                position: sticky;
                top: 0;
            }

            .math {
                max-width: fit-content;
                margin-left: auto;
                margin-right: auto;
            }
            
        </style>
    </head>
    <body> 
        <header>
            <h1>OBJ Viewer Info</h1>
            <nav>
                <ul>
                    <li><a href="../..">Home</a></li>
                    <li><a href="#desmos">Desmos Era</a></li>
                    <li><a href="#java">Java Era</a></li>
                </ul>
            </nav>
        </header>

        <main>
            <div id="pause"><button onclick="pauseToggle()">Toggle Animations</button></div>
            
            <section class="project">
                <h2>OBJ Viewer App</h2>
                <!-- for latex parsing-->
                <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
                <!-- for desmos -->
                <script src="https://www.desmos.com/api/v1.9/calculator.js?apiKey=dcb31709b452b1cf9dc26972add0fda6"></script>
                <script>
                    const defDesmosStates = {keypad: false, expressions: false, settingsMenu: false, zoomButtons: false, lockViewport: true};
                </script>

                <ul class="projectLinks">
                    <li><a href="../../projects/objViewer/objViewer.zip">Try it!</a></li>
                    <li><a href="https://github.com/Nicholasp3435/OBJViewer">Source code</a></li>
                </ul>
                <p><em>i think this is kinda like a blog post i guess</em></p>
                <h3>About</h3>
                <p>I started making this after my linear algebra class. We learned a lot about vectors and transformations. One thing that stuck to me were rotation transformations, though we only learned 
                    about the 2D rotation matrix. 
                </p>
                <p>
                    <div class="math">
                        \begin{bmatrix}
                        \cos\theta & \sin\theta \\
                        \sin\theta & -\cos\theta
                        \end{bmatrix}
                    </div>
                </p>
                <p>A then wondered about how 3D rotation matrices would work. I looked it up and they were pretty much what I thought; just the 2D matrix with some padding to just rotate certian planes.</p>
                <p>
                    <div class="math">
                        <!-- from wikipedia -->
                        \begin{alignedat}{1}R_{yz}(\theta )&={\begin{bmatrix}1&0&0\\0&\cos \theta &-\sin \theta \\[3pt]0&\sin \theta &\cos \theta \\[3pt]\end{bmatrix}}\\[6pt]R_{xz}(\theta )&={\begin{bmatrix}\cos \theta &0&\sin \theta \\[3pt]0&1&0\\[3pt]-\sin \theta &0&\cos \theta \\\end{bmatrix}}\\[6pt]R_{xy}(\theta )&={\begin{bmatrix}\cos \theta &-\sin \theta &0\\[3pt]\sin \theta &\cos \theta &0\\[3pt]0&0&1\\\end{bmatrix}}\end{alignedat}
                    </div>
                </p>
                <p>I also wondered about 4D rotations, but that got complicated and started losing my mind a little. I understand a little, but I still don't get it. Heh, typical 3D brain user amirite.</p>
                <p>Anyway, I saw <a href="https://www.reddit.com/r/googlesheets/comments/1dskzrj/i_decided_to_make_a_simple_3d_renderer_in_google/">this</a> reddit post of someone who made a cube renderer using
                    Google Sheets and saw that it wasn't <em>toooo</em> hard to do. After talking with a friend who is smarter than me in everything, she said that all it really takes to render 3D objects are vectors
                    and matrix multiplication. I almost didn't believe it at the time since it all seemed too simple. I had to try it myself. So I started in desmos....
                </p>
                <h3 id="desmos">Desmos</h3>
                <p>I wanted to keep basic from the start, like reaaaly basic. I wanted to see if I can rotate a 2D square and project it onto a 1D line. I made 4 points for the corners, then I used a 
                    function to transform each vector with the 2D rotation matrix. Then I projected it onto a line. I used a polygon to draw the line since I can just put the transformed and projeced points into it.
                </p>
                <div class="desmosRenderings">
                    <div id="calc1" style="width: 20rem; height: 20rem;">
                        <script src="states/do3uir4gmi.js"></script>
                        <script>
                            var elt1 = document.getElementById('calc1');
                            var calc1 = Desmos.GraphingCalculator(elt1,defDesmosStates);
                            calc1.setState(do3uir4gmi);
                        </script>
                    </div>
                    <div id="calc2" style="width: 20rem; height: 20rem;">
                        <script src="states/xww28vhz1l.js"></script>
                        <script>
                            var elt2 = document.getElementById('calc2');
                            var calc2 = Desmos.GraphingCalculator(elt2,defDesmosStates);
                            calc2.setState(xww28vhz1l);
                        </script>
                    </div>
                </div>
                <p>Yep. Prety straight forward. I also managed any quadrilateral to be "rendered" by just moving the points. All I did was take each coordinate and make a function to multiply each one by the 2D rotation matrix. 
                    Next, time to make a 3D cube rotate on a 2D screen! The process wasn't too hard. It's really just an extention of what I had just done. This time, I was more systematic though. I made a table of each of the vectors
                    of a cube. Then I made 3 functions for each of the 3 planes of rotation in 3D. I made a functoin to multiply a matrix by a vector. With these functions, I made another table to go through and go through 
                    each vector and transform it with each rotation matrix. I then drew a polygon connecting each of the 6 faces together with the transformed vectors.
                </p>
                <div class="desmosRenderings">
                    <div id="calc3" style="width: 20rem; height: 20rem;">
                        <script src="states/gh2umgrkzo.js"></script>
                        <script>
                            var elt3 = document.getElementById('calc3');
                            var calc3 = Desmos.GraphingCalculator(elt3,defDesmosStates);
                            calc3.setState(gh2umgrkzo);
                        </script>
                    </div>
                </div>
                <p>This time, not too straight forward. It only works with a cube anyway. I'd have to go in and manually add every face to a table and update each vertex for it to render anything else. 
                    <em>If only there was a way to get a 3D model's vertices and faces. A neat contained list would be so beneficial...</em> INCOMES THE .OBJ FILE!!
                </p>
                <p>The .obj file is a <em>really</em> simple file format. Remember when I said how I wished for a 3D model to have a neat contained list of it's vertices and faces not 17 words ago? Yep! The .obj file is exactly
                that! Behold! cube.obj:</p>
                <div class="codeBlock">
<pre><code>

    g cube

    # These are the vertices of the cube in x y z
    # It is index starting at 1 for the faces.
    v -1 -1 -1
    v 1 -1 -1
    v -1 1 -1
    v 1 1 -1
    v -1 -1 1
    v 1 -1 1
    v -1 1 1
    v 1 1 1

    # These are the faces that connect the vertices.    
    # Ex: f 1 3 4 connects (-1, -1, -1), (-1, 1, -1), and (1, 1, -1)    
    f 1 3 4
    f 1 2 4
    f 2 4 8
    f 2 6 8
    f 6 7 8
    f 5 6 7
    f 1 3 5
    f 3 5 7
    f 1 2 6
    f 1 5 6
    f 3 4 8
    f 3 7 8

</code></pre>
                </div>
                <p>And that was what I needed to go more advanced! I took a .obj model for a dodecahedron. I was able to pretty much copy and paste the both llists into desmos. I simplified the polygon drawing with a for loop
                    and drew each face as a traingle. everything else was pretty much the same as with the cube, it's just the vertices and faces are very easy to change.
                </p>
                <div class="desmosRenderings">
                    <div id="calc4" style="width: 20rem; height: 20rem;">
                        <script src="states/gdfpc64opa.js"></script>
                        <script>
                            var elt4 = document.getElementById('calc4');
                            var calc4 = Desmos.GraphingCalculator(elt4,defDesmosStates);
                            calc4.setState(gdfpc64opa);
                        </script>
                    </div>
                    <div id="calc5" style="width: 20rem; height: 20rem;">
                        <script src="states/qdwkrta6hs.js"></script>
                        <script>
                            var elt5 = document.getElementById('calc5');
                            var calc5 = Desmos.GraphingCalculator(elt5,defDesmosStates);
                            calc5.setState(qdwkrta6hs);
                        </script>
                    </div>
                </div>
                <p>I also may have started to go a little overboard with the .obj files and took some fun ones.</p>
            </section>
        </main>
        <script>
            function updateGradient() {
                const aspectRatio = window.innerHeight / window.innerWidth;
                document.body.style = 
                `background-image: linear-gradient(
                ${180 - Math.atan(aspectRatio) * (180 / Math.PI)}deg,
                #33031e 0%,
                #33031e 25%,
                #280633,
                #021033 75%,
                #021033 100%);`;
            }

            function openInNewTab(url) {
                window.open(url, '_blank', 'noopener', 'noreferrer');
            }

            function pauseToggle() {
                toggle(calc1, [49], pause);
                toggle(calc2, [49], pause);
                toggle(calc3, [45, 46, 47], pause);
                toggle(calc4, [45, 46, 47], pause);
                toggle(calc5, [54, 55, 56], pause);
                pause = !pause;
            }

            function toggle(calc, n, bool) {
                n.forEach(num => {
                    calc.setExpression({id: calc.getExpressions()[num].id, playing:bool});
                });
            }

            var pause = false;


            window.addEventListener('resize', updateGradient);
            updateGradient();
        </script>
    </body>
</html>